<!-- Start Screen Modal -->
<app-start-modal
  [show]="showStartModal()"
  [players]="players()"
  [minPlayers]="minPlayers"
  [maxPlayers]="maxPlayers"
  [canStartGame]="canStartGame()"
  (addPlayer)="handleAddPlayer($event)"
  (removePlayer)="handleRemovePlayer($event)"
  (updatePlayerName)="handleUpdatePlayerName($event)"
  (startGame)="startGame()"
/>

<!-- End Game Modal -->
<app-end-modal
  [show]="showEndModal()"
  [winner]="winner()"
  (returnToStart)="returnToStart()"
/>

<!-- Notification Popups -->
<app-notification-popups
  [showBust]="showBustPopup()"
  [showFreeze]="showFreezePopup()"
  [showBonus]="showBonusPopup()"
  [showDeckEmpty]="showDeckEmptyPopup()"
  [showNextPlayer]="showNextPlayerPopup()"
  [showSecondChance]="showSecondChancePopup()"
  [showFlipThree]="showFlipThreePopup()"
  [nextPlayerName]="nextPlayerName()"
/>

<!-- Header -->
<app-header />

<main>
  <!-- Top Section: Player Info, Round Score, Leaderboard -->
  <app-top-section
    [currentPlayer]="currentPlayer()"
    [currentRoundScore]="currentRoundScore()"
    [sortedPlayers]="sortedPlayers()"
  />

  <!-- Central Section: Card Deck -->
  <app-deck-section
    [discardPile]="discardPile()"
    [deckCount]="deckCount()"
    [canDrawCard]="canDrawCard()"
    [isTurnActive]="isTurnActive()"
    [hasDrawnCards]="drawnCards().length > 0"
    (drawCard)="drawCard()"
    (endTurn)="endTurn()"
    (viewDiscardPile)="handleViewDiscardPile()"
  />

  <!-- Discard Pile Overlay -->
  <app-discard-overlay
    [show]="showDiscardOverlay()"
    [cards]="discardPile()"
    (close)="handleCloseDiscardOverlay()"
  />

  <!-- Bottom Section: Drawn Cards -->
  <app-drawn-cards [cards]="drawnCards()" />
</main>

<!-- Start Screen Modal -->
@if (show()) {
<div class="modal-overlay">
  <div
    #modalContainer
    class="modal start-modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="start-modal-title"
  >
    <h1 id="start-modal-title">FLIP 7</h1>
    <p class="subtitle">First to 200 points wins!</p>

    <div class="players-section">
      <h2>Players ({{ players().length }}/{{ maxPlayers() }})</h2>
      <div class="players-list">
        @for (player of players(); track $index) {
        <div class="player-item">
          <label [for]="'player-name-' + $index" class="sr-only">
            Player {{ $index + 1 }} name
          </label>
          <input
            type="text"
            [id]="'player-name-' + $index"
            [value]="player.name"
            (blur)="handleUpdatePlayerName($index, $event.target.value)"
            (keyup.enter)="$event.target.blur()"
            class="player-name-input"
            [attr.aria-label]="'Player ' + ($index + 1) + ' name'"
          />
          @if (canRemovePlayer) {
          <button
            (click)="handleRemovePlayer($index)"
            class="remove-btn"
            [attr.aria-label]="'Remove player ' + ($index + 1)"
          >
            Ã—
          </button>
          }
        </div>
        }
      </div>

      <div class="add-player-section">
        <label for="new-player-input" class="sr-only">
          New player name (optional)
        </label>
        <input
          type="text"
          id="new-player-input"
          [(ngModel)]="newPlayerName"
          (keyup.enter)="handleAddPlayer()"
          placeholder="Enter player name (optional)"
          class="new-player-input"
          [disabled]="!canAddPlayer"
          aria-label="New player name"
        />
        <button (click)="handleAddPlayer()" [disabled]="!canAddPlayer" class="add-btn">
          Add Player
        </button>
      </div>

      @if (players().length < minPlayers()) {
      <p class="error-message">Minimum {{ minPlayers() }} players required</p>
      } @if (players().length >= maxPlayers()) {
      <p class="info-message">Maximum {{ maxPlayers() }} players reached</p>
      }
    </div>

    <button (click)="handleStartGame()" [disabled]="!canStartGame()" class="start-btn">
      START
    </button>
  </div>
</div>
}
